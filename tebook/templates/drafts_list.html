{% extends "layout.html" %}

{% block title %}Список чернеток - TeBook{% endblock %}

{% block content %}
<h1>Чернетки презентацій</h1>

{% if is_teacher %}
<a href="/drafts/new" role="button">Створити нову чернетку</a>
{% else %}
<p><em>Для створення чернеток потрібен вхід як викладач</em></p>
{% endif %}

{% if drafts %}
<table>
    <thead>
        <tr>
            <th>ID</th>
            <th>Назва</th>
            <th>Мова</th>
            <th>Тип</th>
            <th>Створено</th>
            <th>Дії</th>
        </tr>
    </thead>
    <tbody>
        {% for draft in drafts %}
        <tr>
            <td>{{ draft.id }}</td>
            <td><a href="/drafts/{{ draft.id }}">{{ draft.title }}</a></td>
            <td>{{ draft.language }}</td>
            <td>{{ draft.doc_type }}</td>
            <td>{{ draft.created_at[:10] }}</td>
            <td>
                <a href="/drafts/{{ draft.id }}">Перегляд</a>
                {% if is_teacher %}
                 | <a href="/drafts/{{ draft.id }}/edit">Редагувати</a>
                 | <a href="#" onclick="event.preventDefault(); if(confirm('Ви впевнені?')) { document.getElementById('delete-form-{{ draft.id }}').submit(); }" class="delete-link">Видалити</a>
                 <form id="delete-form-{{ draft.id }}" method="post" action="/drafts/{{ draft.id }}/delete" style="display: none;">
                 </form>
                {% endif %}
                {% set view_modes_list = (draft.view_modes.split(',') if draft.view_modes else ['slides', 'document', 'full-document']) %}
                {% if 'slides' in view_modes_list %}
                 | <a href="/presentations/{{ draft.id }}?view_mode=slides">Слайди</a>
                {% endif %}
                {% if 'document' in view_modes_list %}
                 | <a href="/presentations/{{ draft.id }}?view_mode=document">Док (клік)</a>
                {% endif %}
                {% if 'full-document' in view_modes_list %}
                 | <a href="/presentations/{{ draft.id }}?view_mode=full-document">Док (повний)</a>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p>Чернеток поки немає.{% if is_teacher %} <a href="/drafts/new">Створіть першу!</a>{% endif %}</p>
{% endif %}
{% endblock %}